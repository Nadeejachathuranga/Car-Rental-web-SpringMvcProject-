<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="../css/bootstrap.css">
    <link rel="stylesheet" href="../css/style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
</head>
<body class="body" onload="loadAllCars();">
<div class="container-fluid">
    <div class="card-deck">
        <div class="card">
            <div class="card-body">
                <h1>Are you want add new car?</h1>
                <h5> click this button</h5>
                <button type="button" class="btn btn-primary" id="addCarBtn" data-toggle="modal" data-target="#carInertModel"> add cars</button>
            </div>
        </div>

        <div class="card">
            <div class="card-body">
                <h1>Are you want delete  car?</h1>
                <h5> click this button</h5>
                <button type="button" class="btn btn-primary" id="deleteCarBtn"  data-toggle="modal" data-target="#carDeletetModel"> delete car</button>
            </div>
        </div>

        <div class="card">
            <div class="card-body">
                <h1>Are you want update  car?</h1>
                <h5> click this button</h5>
                <button type="button" class="btn btn-primary" id="updateCarBtn" > update car</button>
            </div>
        </div>
    </div>

    <div class="carSearchingArea">
        <button type="button" class="btn btn-primary" id="getAllBtn" data-toggle="modal" data-target="#testMode" >All Cars Show</button>
        <div class="form-group">
        <input type="text" class="form-control" id="searchIdTxt" placeholder="Insert Id">
        </div>
        <div class="searchBtn">
            <button type="button" class="btn btn-primary" id="searchCarBtn" >Search</button>
        </div>
        <div class="resultArea">
            <div class="reFirstBox">
             <label >ID</label>
            <h6 id="txtCarID"></h6>
                <label >NAME</label>
                <h6 id="txtCarName"></h6>
                <label >BRAND</label>
                <h6 id="txtCarBrand"></h6>
                <label >COLOUR</label>
                <h6 id="txtCarColour"></h6>
                <label >FUEL</label>
                <h6 id="txtCarFuel"></h6>
                <label >PASSENGER SEAT</label>
                <h6 id="txtCarPassengerSeat"></h6>
            </div>
            <div class="reSecondBox">
                <label >PRICE OF EXTRA KM</label>
                <h6 id="txtCarPoek"></h6>
                <label >RATE</label>
                <h6 id="txtCarRate"></h6>
                <label >REGISTER NUMBER</label>
                <h6 id="txtCarReg"></h6>
                <label >TRANSMISSION TYPE</label>
                <h6 id="txtCarTrans"></h6>
                <label >TYPE</label>
                <h6 id="txtCarType"></h6>
                <label >FREE KM OF RENT</label>
                <h6 id="txtCarFkor"></h6>
            </div>
        </div>
        <div class="btnBox">
            <button type="button" class="btn btn-primary" id="carUpdateBtn" >Update</button>
            <button type="button" class="btn btn-primary" id="DeleteBTN" data-toggle="modal" data-target="#carDeletetModel" >Delete</button>
        </div>
    </div>

    <div class="carManageFirstBox"id="carManageFirstBox">
        <div class="leftBox" id="leftBox">

            <h1 id="carId">id</h1>
        </div><!--leftBox-->
        <div class="rightBox" id="rightBox">
            <div class="col-6 col-lg-6 mt-3">
                <table class="table table-bordered table-hover" style="height: 500px" id="tbCarManage">
                    <thead class="bg-success text-white">
                    <tr>
                        <th>CarId</th>
                        <th>Name</th>
                        <th>Brand</th>
                        <th>Colour</th>
                        <th>Fuel</th>
                        <th>Passenger</th>
                        <th>ExtraKmPrice</th>
                        <th>Rate</th>
                        <th>RegNo</th>
                        <th>Transmission</th>
                        <th>Type</th>
                        <th>FreeKm</th>
                    </tr>
                    </thead>
                    <tbody id="tblAllCar">

                    </tbody>
                </table>
            </div>
        </div><!--rightBox-->
    </div><!--carManageFirstBox-->

</div><!--container-fluid-->


<div class="modal fade" tabindex="-1" id="testMode" role="dialog">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Are You Sure! </h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <!-- Modal Body -->
                <div class="col-6 col-lg-6 mt-3">
                    <table class="table table-bordered table-hover" style="height: 500px" id="testtbCarManage">
                        <thead class="bg-success text-white">
                        <tr>
                            <th>CarId</th>
                            <th>Name</th>
                            <th>Brand</th>
                            <th>Colour</th>
                            <th>Fuel</th>
                            <th>Passenger</th>
                            <th>ExtraKmPrice</th>
                            <th>Rate</th>
                            <th>RegNo</th>
                            <th>Transmission</th>
                            <th>Type</th>
                            <th>FreeKm</th>
                        </tr>
                        </thead>
                        <tbody id="testtblAllCar">

                        </tbody>
                    </table>
                </div>
            </div>
            <div class="modal-footer">
                <p> </p>
            </div>
        </div>
    </div>
</div>
<!-- // Modal more content -->

<div class="modal fade" tabindex="-1" id="carDeletetModel" role="dialog">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Are You Sure! </h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <!-- Modal Body -->
                <form id="carDeleteForm">
                    <button  id="carDeletebtn" type="submit" class="btn btn-primary">Delete</button>
                </form>
            </div>
            <div class="modal-footer">
                <p> </p>
            </div>
        </div>
    </div>
</div>
<!-- // Modal more content -->

<div class="modal fade" tabindex="-1" id="carInertModel" role="dialog">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Registration Form </h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <!-- Modal Body -->
                <form id="regForm">
                    <div class="form-group">
                        <label for="nameInputTxt">Name</label>
                        <input type="text" class="form-control" id="nameInputTxt" placeholder="Insert Name">
                    </div>
                    <div class="form-group">
                    <label for="nameInputTxt">Brand</label>
                    <input type="text" class="form-control" id="brandInputTxt" placeholder="Insert Brand">
                    </div>
                    <div class="form-group">
                        <label for="nameInputTxt">Register Number</label>
                        <input type="text" class="form-control" id="RegNoInputTxt" placeholder="Insert Register Number">
                    </div>
                    <div class="form-group">
                        <label for="nameInputTxt">Rate</label>
                        <input type="text" class="form-control" id="rateInputTxt" placeholder="Insert Rate">
                    </div>
                    <div class="form-group">
                        <label for="nameInputTxt">Price Of Extra km</label>
                        <input type="text" class="form-control" id="priceExtraKmInputTxt" placeholder="Insert Price Of Extra km">
                    </div>
                    <div class="form-group">
                        <label for="nameInputTxt">Free Km For Day</label>
                        <input type="text" class="form-control" id="FreeKmInputTxt" placeholder="Insert Free Km For Day">
                    </div>
                    <div class="form-group">
                        <label for="nameInputTxt">Vehicle Type</label>
                        <input type="text" class="form-control" id="vehicleTypeInputTxt" placeholder="Insert Vehicle Type">
                    </div>
                    <div class="form-group">
                        <label for="nameInputTxt">Transmission Type</label>
                        <input type="text" class="form-control" id="transmissionInputTxt" placeholder="Insert Transmission Type">
                    </div>
                    <div class="form-group">
                        <label for="nameInputTxt">Number of Passenger</label>
                        <input type="text" class="form-control" id="noPassengerInputTxt" placeholder="Insert Number of Passenger">
                    </div>
                    <div class="form-group">
                        <label for="nameInputTxt">Colour</label>
                        <input type="text" class="form-control" id="colourInputTxt" placeholder="Insert Colour">
                    </div>
                    <div class="form-group">
                        <label for="nameInputTxt">Fuel Type</label>
                        <input type="text" class="form-control" id="fuelInputTxt" placeholder="Insert Fuel">
                    </div>
                    <button  id="carInertBtn" type="submit" class="btn btn-primary">Save</button>
                </form>
            </div>
            <div class="modal-footer">
                <p> </p>
            </div>
        </div>
    </div>
</div>
<!-- // Modal more content -->
<script>
    let searchCarID;
    const BASE_URL = "http://localhost:8080/BackEnd_war";

    $("#carInertBtn").click(function (){
        var name=$("#nameInputTxt").val();
        var brand=$("#brandInputTxt").val();
        var regNo=$("#RegNoInputTxt").val();
        var rate=$("#rateInputTxt").val();
        var priceEDay=$("#priceExtraKmInputTxt").val();
        var freeKm=$("#FreeKmInputTxt").val();
        var type=$("#vehicleTypeInputTxt").val();
        var transmission=$("#transmissionInputTxt").val();
        var noPassenger=$("#noPassengerInputTxt").val();
        var colour=$("#colourInputTxt").val();
        var fuel=$("#fuelInputTxt").val();
        insertCar(name,brand,regNo,rate,priceEDay,freeKm,type,transmission,noPassenger,colour,fuel);
    });
    function insertCar(name,brand,regNo,rate,priceEDay,freeKm,type,transmission,noPassenger,colour,fuel){
        $.ajax({
            url:BASE_URL+"/car?name="+name+"&brand="+brand+"&type="+type+"&regNo="+regNo+"&priceExtraKm="+priceEDay+"&transmissonType="+transmission+"&rate="+rate+"&noOfPassenger="+noPassenger+"&fuel="+fuel+"&color="+colour+"&freeKmDay="+freeKm,
            method:'POST',
            success: function (resp) {
                alert(resp);
                let res=resp.state;
                if (res=="Ok"){
                    alert("Added");
                }
            },
            error: function (error) {
                alert("error");

            }
        });
        loadAllCars();
    };
    function loadAllCars(){
        $("#tblAllCar").empty();
        $.ajax({
            url:BASE_URL+"/car",
            method:"Get",
            dataType: "json",
            success: function (response) {
                let cars = response.data;
                for (let i in cars) {
                    let car = cars[i];
                        let carid=car.id;
                        let name = car.name;
                        let brand = car.brand;
                        let colour = car.color;
                        let fuel = car.fuel;
                        let passe = car.noOfPassengers;
                        let pek = car.priceExtraKm;
                        let rate = car.rate;
                        let reg = car.regNo;
                        let transtype = car.transmissionType;
                        let type = car.type;
                        let freeKm = car.freeKmDay;
                        let row = `<tr><td>${carid}</td><td>${name}</td><td>${brand}</td><td>${colour}</td><td>${fuel}</td><td>${passe}</td><td>${pek}</td><td>${rate}</td><td>${reg}</td><td>${transtype}</td><td>${type}</td><td>${freeKm}</td></tr>`;
                        $("#tblAllCar").append(row);
                }
                selectRow();
            },
        })
    }
    let id;
    function selectRow(){
        $('#tblAllCar>tr').click(function () {
            id = $(this).children().eq(0).text();
            document.getElementById("carId").innerHTML=id;
        })
    }

    $("#deleteCarBtn").click(function (){
        $.ajax({
            url: BASE_URL + "/car?id="+searchCarID,
            method: 'DELETE',
            success: function (resp) {
            },
            error: function (error) {
            }
        });
        loadAllCars();
    })



    $("#searchCarBtn").click(function (){
         searchCarID=$("#searchIdTxt").val()
        SearchCar(searchCarID);
    })
    function SearchCar(searchCarID){
        $.ajax({
            url: BASE_URL + "/car?id="+searchCarID,
            method: 'GET',
            success: function (resp) {
                let car=resp.data;
                let carid=car.id;
                let name = car.name;
                let brand = car.brand;
                let colour = car.color;
                let fuel = car.fuel;
                let passe = car.noOfPassengers;
                let pek = car.priceExtraKm;
                let rate = car.rate;
                let reg = car.regNo;
                let transtype = car.transmissionType;
                let type = car.type;
                let freeKm = car.freeKmDay;
                document.getElementById("txtCarID").innerHTML=carid;
                document.getElementById("txtCarName").innerHTML=name;
                document.getElementById("txtCarBrand").innerHTML=brand;
                document.getElementById("txtCarColour").innerHTML=colour;
                document.getElementById("txtCarFuel").innerHTML=fuel;
                document.getElementById("txtCarPassengerSeat").innerHTML=passe;
                document.getElementById("txtCarPoek").innerHTML=pek;
                document.getElementById("txtCarRate").innerHTML=rate;
                document.getElementById("txtCarReg").innerHTML=reg;
                document.getElementById("txtCarTrans").innerHTML=transtype;
                document.getElementById("txtCarType").innerHTML=type;
                document.getElementById("txtCarFkor").innerHTML=freeKm;
            },
            error: function (error) {

            }
        })
    }

</script>


<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
</body>
</html>